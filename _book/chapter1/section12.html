
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>1.12 ELK搭建日志收集系统 · 技术文档沉淀</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="方洋">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-lou/lou.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="section13.html" />
    
    
    <link rel="prev" href="section11.html" />
    

    </head>
    <body>
         

<div class="book">
  <div class="header-inner">
    <!-- LOGO -->
    <div class="logo"></div>
    <span class="title"></span>

    <!-- Search -->
    
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>


    <!-- Nav -->
    <ul class="header-nav">
      
    </ul>
  </div>

  <div class="book-summary">
    <div class="book-summary-title">文档目录</div>
     
    <nav role="navigation">


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../简历.html">
            
                <a href="../简历.html">
            
                    
                    个人简历
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../">
            
                <a href="../">
            
                    
                    基础技能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../架构图.html">
            
                <a href="../架构图.html">
            
                    
                    系统架构图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    1.技术文档
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="section1.html">
            
                <a href="section1.html">
            
                    
                    1.1 规则引擎QLExpress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="section2.html">
            
                <a href="section2.html">
            
                    
                    1.2 Elastic APM 应用性能监控分析及使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="section3.html">
            
                <a href="section3.html">
            
                    
                    1.3 Nacos注册中心、配置中心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="section4.html">
            
                <a href="section4.html">
            
                    
                    1.4 Nacos配置中心持久化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="section5.html">
            
                <a href="section5.html">
            
                    
                    1.5 服务容错Sentinel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="section6.html">
            
                <a href="section6.html">
            
                    
                    1.6 参数校验工具类介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="section7.html">
            
                <a href="section7.html">
            
                    
                    1.7 Feign集成OKHttp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="section8.html">
            
                <a href="section8.html">
            
                    
                    1.8 消息队列RocketMQ梳理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="section9.html">
            
                <a href="section9.html">
            
                    
                    1.9 RocketMQ分布式事务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="section10.html">
            
                <a href="section10.html">
            
                    
                    1.10 DDD领域驱动架构模型分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="section11.html">
            
                <a href="section11.html">
            
                    
                    1.11 分布式日志链路跟踪
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.12" data-path="section12.html">
            
                <a href="section12.html">
            
                    
                    1.12 ELK搭建日志收集系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.13" data-path="section13.html">
            
                <a href="section13.html">
            
                    
                    1.13 Docker学习常用命令汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../chapter2/">
            
                <a href="../chapter2/">
            
                    
                    2.技术方案与性能优化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../chapter2/section1.html">
            
                <a href="../chapter2/section1.html">
            
                    
                    2.1 技术方案实例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../chapter2/section2.html">
            
                <a href="../chapter2/section2.html">
            
                    
                    2.2 ArthasTrace工具性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../chapter2/section3.html">
            
                <a href="../chapter2/section3.html">
            
                    
                    2.3 代码ReCoding同步钉钉考勤记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../chapter2/section4.html">
            
                <a href="../chapter2/section4.html">
            
                    
                    2.4 线上JVM服务器磁盘IO、CPU占用过高排查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../chapter2/section5.html">
            
                <a href="../chapter2/section5.html">
            
                    
                    2.5 大事务导致数据库死锁、引起线上云服务器CPU利用率过高
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../项目规范/">
            
                <a href="../项目规范/">
            
                    
                    3.项目管理规范
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../项目规范/section1.html">
            
                <a href="../项目规范/section1.html">
            
                    
                    3.1 测试bug类型定义
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../项目规范/section2.html">
            
                <a href="../项目规范/section2.html">
            
                    
                    3.2 项目过程变更情况处理方案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../项目规范/section3.html">
            
                <a href="../项目规范/section3.html">
            
                    
                    3.3 技术评审会规则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../项目规范/section4.html">
            
                <a href="../项目规范/section4.html">
            
                    
                    3.4 多产品线联动，项目如何有序推进
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../end/">
            
                <a href="../end/">
            
                    
                    结束
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>

</nav>
     
  </div>

  <!-- Content nav -->
  <div class="book-anchor">
    <div class="book-anchor-title"></div>

    <div class="book-anchor-body"></div>
  </div>

  <div class="book-body">
    
    <div class="body-inner">
       

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >1.12 ELK搭建日志收集系统</a>
    </h1>
</div>



      <div class="page-wrapper" tabindex="-1" role="main">
        <div class="page-inner">
          
<div id="book-search-results">
    <div class="search-noresults">
    
          <section class="normal markdown-section">
             <h1 id="elk&#x642D;&#x5EFA;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x7CFB;&#x7EDF;">ELK&#x642D;&#x5EFA;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x7CFB;&#x7EDF;</h1>
<h2 id="&#x6982;&#x8FF0;">&#x6982;&#x8FF0;</h2>
<blockquote>
<p>[!note]</p>
<p>&#x5229;&#x7528;docker&#x5BB9;&#x5668;&#x5316;&#x4EE5;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x8003;&#x8651;&#x5982;&#x4F55;&#x91C7;&#x96C6;&#x4F4D;&#x4E8E;Docker&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6253;&#x5370;&#x65E5;&#x5FD7;&#x4F9B;&#x8FD0;&#x7EF4;&#x5206;&#x6790;&#x3002;&#x6BD4;&#x5982;SpringBoot&#x5E94;&#x7528;&#x7684;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x3002;&#x5229;&#x7528;ELK&#x65E5;&#x5FD7;&#x4E2D;&#x5FC3;&#x6765;&#x6536;&#x96C6;&#x5BB9;&#x5668;&#x5316;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x7528;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#x5BF9;&#x65E5;&#x5FD7;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x4E0E;&#x5206;&#x6790;&#xFF0C;&#x5176;&#x67B6;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;</p>
</blockquote>
<h3 id="&#x67B6;&#x6784;&#x56FE;">&#x67B6;&#x6784;&#x56FE;</h3>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a237eda0f1c441eab58ad5040d278f11~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x67B6;&#x6784;&#x56FE;"></p>
<h2 id="&#x73AF;&#x5883;&#x642D;&#x5EFA;">&#x73AF;&#x5883;&#x642D;&#x5EFA;</h2>
<h3 id="&#x57FA;&#x7840;&#x73AF;&#x5883;&#x4F9D;&#x8D56;">&#x57FA;&#x7840;&#x73AF;&#x5883;&#x4F9D;&#x8D56;</h3>
<table>
<thead>
<tr>
<th>&#x7EC4;&#x4EF6;</th>
<th>&#x7248;&#x672C;&#x53F7;</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mysql</td>
<td>5.7</td>
</tr>
<tr>
<td>Elasticsearch</td>
<td>7.6.2</td>
</tr>
<tr>
<td>Logstash</td>
<td>7.6.2</td>
</tr>
<tr>
<td>Kibana</td>
<td>7.6.2</td>
</tr>
</tbody>
</table>
<h2 id="docker&#x5B89;&#x88C5;">docker&#x5B89;&#x88C5;</h2>
<blockquote>
<p>(&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x53C2;&#x8003; <a href="https://yeasy.gitbook.io/docker_practice/install" target="_blank">https://yeasy.gitbook.io/docker_practice/install</a>)</p>
</blockquote>
<h3 id="&#x5B89;&#x88C5;yum-utils&#xFF08;&#x5B89;&#x88C5;docker-ce&#x6240;&#x9700;&#x4F9D;&#x8D56;&#xFF09;">&#x5B89;&#x88C5;yum-utils&#xFF08;&#x5B89;&#x88C5;docker-ce&#x6240;&#x9700;&#x4F9D;&#x8D56;&#xFF09;</h3>
<pre><code class="lang-bash"> yum install -y yum-utils device-mapper-persistent-data lvm2
</code></pre>
<h3 id="&#x4E3A;yum&#x6E90;&#x6DFB;&#x52A0;docker&#x4ED3;&#x5E93;&#x4F4D;&#x7F6E;">&#x4E3A;yum&#x6E90;&#x6DFB;&#x52A0;docker&#x4ED3;&#x5E93;&#x4F4D;&#x7F6E;</h3>
<pre><code class="lang-bash">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

yum.repos.d

<span class="hljs-comment"># &#x4ED3;&#x5E93;&#x6E90;&#x5B58;&#x653E;&#x7684;&#x4F4D;&#x7F6E;</span>
<span class="hljs-built_in">cd</span> /etc/yum.repos.d 

vim docker-ce.repo
</code></pre>
<h3 id="&#x5B89;&#x88C5;docker">&#x5B89;&#x88C5;docker</h3>
<blockquote>
<p>&#x26A0;&#xFE0F;&#x6CE8;&#x610F; docker-ce&#x4E0E;docker&#x4E24;&#x4E2A;&#x4ED3;&#x5E93;&#x7248;&#x672C;&#x6709;&#x5DEE;&#x5F02;&#xFF08;&#x672C;&#x4EBA;&#x722C;&#x5751;&#x6BD4;&#x8F83;&#x591A; docker&#x4E0D;&#x652F;&#x6301;&#x6587;&#x4EF6;&#x7684;&#x6302;&#x8F7D;&#x6BD4;&#x8F83;&#x8001;&#x7684;&#x7248;&#x672C;&#xFF09;</p>
</blockquote>
<pre><code class="lang-bash"> yum install docker-ce

<span class="hljs-comment"># &#x5982;&#x679C;&#x62A5;&#x9519;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;</span>
errors during downloading metadata <span class="hljs-keyword">for</span> repository <span class="hljs-string">&apos;base&apos;</span>:
  - Curl error (28): Timeout was reached <span class="hljs-keyword">for</span> http://mirrors.aliyuncs.com/centos/3/os/x86_64/repodata/repomd.xml [Connection timed out after 30001 milliseconds]
  - Status code: 404 <span class="hljs-keyword">for</span> http://mirrors.cloud.aliyuncs.com/centos/3/os/x86_64/repodata/repomd.xml (IP: 100.100.2.148)
  - Status code: 404 <span class="hljs-keyword">for</span> http://mirrors.aliyun.com/centos/3/os/x86_64/repodata/repomd.xml (IP: 39.96.118.193)
Error: Failed to download metadata <span class="hljs-keyword">for</span> repo <span class="hljs-string">&apos;base&apos;</span>: Cannot download repomd.xml: Cannot download repodata/repomd.xml: All mirrors were tried

<span class="hljs-comment"># &#x5C06;/etc/yum.repos.d/docker-ce.repo&#x7684;&#x5730;&#x5740;&#x8FDB;&#x884C;&#x4FEE;&#x6539;</span>
<span class="hljs-comment"># &#x5C06;&#x6570;&#x636E;&#x6E90;&#x66FF;&#x6362;&#x6210;&#x7248;&#x672C;7 &#x4E0D;&#x7136;&#x4E0B;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x62A5;&#x9519; &#x94FE;&#x63A5;&#x5730;&#x5740;&#x4E0D;&#x5B58;&#x5728;.</span>
baseurl=https://download.docker.com/linux/centos/7/debug-<span class="hljs-variable">$basearch</span>/stable
</code></pre>
<h3 id="&#x542F;&#x52A8;docker">&#x542F;&#x52A8;docker</h3>
<pre><code class="lang-bash"> systemctl start docker
</code></pre>
<h2 id="&#x5229;&#x7528;docker&#x5B89;&#x88C5;&#x5BF9;&#x5E94;&#x7684;&#x670D;&#x52A1;">&#x5229;&#x7528;docker&#x5B89;&#x88C5;&#x5BF9;&#x5E94;&#x7684;&#x670D;&#x52A1;</h2>
<h3 id="elasticsearch&#x5B89;&#x88C5;">Elasticsearch&#x5B89;&#x88C5;</h3>
<h4 id="&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;elasticsearch&#x670D;&#x52A1;">&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;Elasticsearch&#x670D;&#x52A1;</h4>
<pre><code class="lang-bash">docker run -p 9200:9200 -p 9300:9300 --name elasticsearch \
<span class="hljs-_">-e</span> <span class="hljs-string">&quot;discovery.type=single-node&quot;</span> \
<span class="hljs-_">-e</span> <span class="hljs-string">&quot;cluster.name=elasticsearch&quot;</span> \
-v /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins \
-v /mydata/elasticsearch/data:/usr/share/elasticsearch/data \
<span class="hljs-_">-d</span> elasticsearch:7.6.2
</code></pre>
<h4 id="&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x62A5;&#x9519;">&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x62A5;&#x9519;</h4>
<pre><code class="lang-bash">OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated <span class="hljs-keyword">in</span> version 9.0 and will likely be removed <span class="hljs-keyword">in</span> a future release.
{<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;server&quot;</span>, <span class="hljs-string">&quot;timestamp&quot;</span>: <span class="hljs-string">&quot;2021-06-03T11:24:02,468Z&quot;</span>, <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;ERROR&quot;</span>, <span class="hljs-string">&quot;component&quot;</span>: <span class="hljs-string">&quot;o.e.b.ElasticsearchUncaughtExceptionHandler&quot;</span>, <span class="hljs-string">&quot;cluster.name&quot;</span>: <span class="hljs-string">&quot;elasticsearch&quot;</span>, <span class="hljs-string">&quot;node.name&quot;</span>: <span class="hljs-string">&quot;4f5aaf7716c0&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;uncaught exception in thread [main]&quot;</span>, 
<span class="hljs-string">&quot;stacktrace&quot;</span>: [<span class="hljs-string">&quot;org.elasticsearch.bootstrap.StartupException: ElasticsearchException[failed to bind service]; nested: AccessDeniedException[/usr/share/elasticsearch/data/nodes];&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:174) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:161) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:125) ~[elasticsearch-cli-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:126) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;Caused by: org.elasticsearch.ElasticsearchException: failed to bind service&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:615) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:257) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Bootstrap<span class="hljs-variable">$5</span>.&lt;init&gt;(Bootstrap.java:221) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:221) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:349) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:170) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;... 6 more&quot;</span>,
<span class="hljs-string">&quot;Caused by: java.nio.file.AccessDeniedException: /usr/share/elasticsearch/data/nodes&quot;</span>,
<span class="hljs-string">&quot;at sun.nio.fs.UnixException.translateToIOException(UnixException.java:90) ~[?:?]&quot;</span>,
<span class="hljs-string">&quot;at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111) ~[?:?]&quot;</span>,
<span class="hljs-string">&quot;at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116) ~[?:?]&quot;</span>,
<span class="hljs-string">&quot;at sun.nio.fs.UnixFileSystemProvider.createDirectory(UnixFileSystemProvider.java:389) ~[?:?]&quot;</span>,
<span class="hljs-string">&quot;at java.nio.file.Files.createDirectory(Files.java:693) ~[?:?]&quot;</span>,
<span class="hljs-string">&quot;at java.nio.file.Files.createAndCheckIsDirectory(Files.java:800) ~[?:?]&quot;</span>,
<span class="hljs-string">&quot;at java.nio.file.Files.createDirectories(Files.java:786) ~[?:?]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.env.NodeEnvironment.lambda<span class="hljs-variable">$new</span><span class="hljs-variable">$0</span>(NodeEnvironment.java:274) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.env.NodeEnvironment<span class="hljs-variable">$NodeLock</span>.&lt;init&gt;(NodeEnvironment.java:211) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.env.NodeEnvironment.&lt;init&gt;(NodeEnvironment.java:271) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:277) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:257) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Bootstrap<span class="hljs-variable">$5</span>.&lt;init&gt;(Bootstrap.java:221) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:221) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:349) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:170) ~[elasticsearch-7.6.2.jar:7.6.2]&quot;</span>,
<span class="hljs-string">&quot;... 6 more&quot;</span>] }
uncaught exception <span class="hljs-keyword">in</span> thread [main]
</code></pre>
<blockquote>
<p>&#x542F;&#x52A8;&#x65F6;&#x4F1A;&#x53D1;&#x73B0;/usr/share/elasticsearch/data&#x76EE;&#x5F55;&#x6CA1;&#x6709;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4FEE;&#x6539;/mydata/elasticsearch/data&#x76EE;&#x5F55;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x5373;&#x53EF;</p>
</blockquote>
<pre><code class="lang-bash">chmod 777 /mydata/elasticsearch/data/
</code></pre>
<h4 id="&#x5B89;&#x88C5;&#x4E2D;&#x6587;&#x5206;&#x8BCD;&#x5668;ikanalyzer&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x542F;&#x52A8;">&#x5B89;&#x88C5;&#x4E2D;&#x6587;&#x5206;&#x8BCD;&#x5668;IKAnalyzer&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x542F;&#x52A8;</h4>
<pre><code class="lang-bash">
<span class="hljs-comment"># &#x8FDB;&#x5165;docker&#x5BB9;&#x5668;&#x4E2D;</span>
docker <span class="hljs-built_in">exec</span> -it elasticsearch /bin/bash

<span class="hljs-comment">#&#x6B64;&#x547D;&#x4EE4;&#x9700;&#x8981;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;</span>
elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip
-&gt; Installing https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip
-&gt; Downloading https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip
[=================================================] 100%?? 
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@     WARNING: plugin requires additional permissions     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
* java.net.SocketPermission * connect,resolve
See http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.html
<span class="hljs-keyword">for</span> descriptions of what these permissions allow and the associated risks.

Continue with installation? [y/N]y
-&gt; Installed analysis-ik

<span class="hljs-comment"># &#x9000;&#x51FA;&#x53BB;&#x540E;&#x91CD;&#x542F;&#x751F;&#x6548;</span>
docker restart elasticsearch
</code></pre>
<h4 id="&#x8BBF;&#x95EE;&#x4F1A;&#x8FD4;&#x56DE;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF1A;http39103203419200">&#x8BBF;&#x95EE;&#x4F1A;&#x8FD4;&#x56DE;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF1A;<a href="http://39.103.203.41:9200/" target="_blank">http://39.103.203.41:9200/</a></h4>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;4f5aaf7716c0&quot;</span>,
  <span class="hljs-string">&quot;cluster_name&quot;</span> : <span class="hljs-string">&quot;elasticsearch&quot;</span>,
  <span class="hljs-string">&quot;cluster_uuid&quot;</span> : <span class="hljs-string">&quot;PBB0ZytDStO-9SJjAarNyw&quot;</span>,
  <span class="hljs-string">&quot;version&quot;</span> : {
    <span class="hljs-string">&quot;number&quot;</span> : <span class="hljs-string">&quot;7.6.2&quot;</span>,
    <span class="hljs-string">&quot;build_flavor&quot;</span> : <span class="hljs-string">&quot;default&quot;</span>,
    <span class="hljs-string">&quot;build_type&quot;</span> : <span class="hljs-string">&quot;docker&quot;</span>,
    <span class="hljs-string">&quot;build_hash&quot;</span> : <span class="hljs-string">&quot;ef48eb35cf30adf4db14086e8aabd07ef6fb113f&quot;</span>,
    <span class="hljs-string">&quot;build_date&quot;</span> : <span class="hljs-string">&quot;2020-03-26T06:34:37.794943Z&quot;</span>,
    <span class="hljs-string">&quot;build_snapshot&quot;</span> : <span class="hljs-literal">false</span>,
    <span class="hljs-string">&quot;lucene_version&quot;</span> : <span class="hljs-string">&quot;8.4.0&quot;</span>,
    <span class="hljs-string">&quot;minimum_wire_compatibility_version&quot;</span> : <span class="hljs-string">&quot;6.8.0&quot;</span>,
    <span class="hljs-string">&quot;minimum_index_compatibility_version&quot;</span> : <span class="hljs-string">&quot;6.0.0-beta1&quot;</span>
  },
  <span class="hljs-string">&quot;tagline&quot;</span> : <span class="hljs-string">&quot;You Know, for Search&quot;</span>
}
</code></pre>
<h3 id="logstash&#x5B89;&#x88C5;">Logstash&#x5B89;&#x88C5;</h3>
<h4 id="&#x4E0B;&#x8F7D;logstash762&#x7684;docker&#x955C;&#x50CF;">&#x4E0B;&#x8F7D;Logstash7.6.2&#x7684;docker&#x955C;&#x50CF;</h4>
<pre><code class="lang-bash">docker pull logstash:7.6.2
</code></pre>
<h4 id="&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;logstashconf">&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;logstash.conf</h4>
<pre><code class="lang-conf">input {
  tcp {

    mode =&gt; &quot;server&quot;
    host =&gt; &quot;0.0.0.0&quot;
    port =&gt; 4560
    codec =&gt; json_lines
    type =&gt; &quot;debug&quot;

  }
  tcp {

    mode =&gt; &quot;server&quot;
    host =&gt; &quot;0.0.0.0&quot;
    port =&gt; 4561
    codec =&gt; json_lines
    type =&gt; &quot;error&quot;

  }
  tcp {

    mode =&gt; &quot;server&quot;
    host =&gt; &quot;0.0.0.0&quot;
    port =&gt; 4562
    codec =&gt; json_lines
    type =&gt; &quot;business&quot;

  }
  tcp {

    mode =&gt; &quot;server&quot;
    host =&gt; &quot;0.0.0.0&quot;
    port =&gt; 4563
    codec =&gt; json_lines
    type =&gt; &quot;record&quot;

  }
}
filter{
  if [type] == &quot;record&quot; {

    mutate {
      remove_field =&gt; &quot;port&quot;
      remove_field =&gt; &quot;host&quot;
      remove_field =&gt; &quot;@version&quot;
    }
    json {
      source =&gt; &quot;message&quot;
      remove_field =&gt; [&quot;message&quot;]
    }

  }
}
output {
  elasticsearch {
    hosts =&gt; &quot;39.103.203.41:9200&quot;
    index =&gt; &quot;mall-%{type}-%{+YYYY.MM.dd}&quot;

  }
}
</code></pre>
<h4 id="&#x521B;&#x5EFA;mydatalogstash&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x5C06;logstash&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;logstashconf&#x62F7;&#x8D1D;&#x5230;&#x8BE5;&#x76EE;&#x5F55;">&#x521B;&#x5EFA;/mydata/logstash&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x5C06;Logstash&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;logstash.conf&#x62F7;&#x8D1D;&#x5230;&#x8BE5;&#x76EE;&#x5F55;</h4>
<pre><code class="lang-bash">mkdir /mydata/logstash
</code></pre>
<h4 id="&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;logstash&#x670D;&#x52A1;">&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;Logstash&#x670D;&#x52A1;</h4>
<pre><code class="lang-bash">docker run --name logstash -p 4560:4560 -p 4561:4561 -p 4562:4562 -p 4563:4563 \
--link elasticsearch:es \
-v /mydata/logstash/logstash.conf:/usr/share/logstash/pipeline/logstash.conf \
<span class="hljs-_">-d</span> logstash:7.6.2
</code></pre>
<h4 id="&#x5728;logstash&#x4E2D;&#x5B89;&#x88C5;jsonlines&#x63D2;&#x4EF6;">&#x5728;logstash&#x4E2D;&#x5B89;&#x88C5;json_lines&#x63D2;&#x4EF6;</h4>
<pre><code class="lang-bash"><span class="hljs-comment"># &#x8FDB;&#x5165;logstash&#x5BB9;&#x5668;</span>
docker <span class="hljs-built_in">exec</span> -it logstash /bin/bash
<span class="hljs-comment"># &#x8FDB;&#x5165;bin&#x76EE;&#x5F55;</span>
<span class="hljs-built_in">cd</span> /bin/
<span class="hljs-comment"># &#x5B89;&#x88C5;&#x63D2;&#x4EF6;</span>
logstash-plugin install logstash-codec-json_lines

OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated <span class="hljs-keyword">in</span> version 9.0 and will likely be removed <span class="hljs-keyword">in</span> a future release.
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.headius.backport9.modules.Modules to method sun.nio.ch.NativeThread.signal(long)
WARNING: Please consider reporting this to the maintainers of com.headius.backport9.modules.Modules
WARNING: Use --illegal-access=warn to <span class="hljs-built_in">enable</span> warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied <span class="hljs-keyword">in</span> a future release
Validating logstash-codec-json_lines
Installing logstash-codec-json_lines
Installation successful
<span class="hljs-comment"># &#x9000;&#x51FA;&#x5BB9;&#x5668;</span>
<span class="hljs-built_in">exit</span>
<span class="hljs-comment"># &#x91CD;&#x542F;logstash&#x670D;&#x52A1;</span>
docker restart logstash
</code></pre>
<h3 id="kibana&#x5B89;&#x88C5;">Kibana&#x5B89;&#x88C5;</h3>
<h4 id="&#x4E0B;&#x8F7D;kibana762&#x7684;docker&#x955C;&#x50CF;">&#x4E0B;&#x8F7D;Kibana7.6.2&#x7684;docker&#x955C;&#x50CF;</h4>
<pre><code class="lang-bash">7.6.2: Pulling from library/kibana
ab5ef0e58194: Already exists 
c64d415<span class="hljs-built_in">fc</span>4c4: Pull complete 
40a228497f87: Pull complete 
047cebeb3d2b: Pull complete 
a1e90407e522: Pull complete 
b665bda75e65: Pull complete 
12bc27d9cfdc: Pull complete 
2611a8427d9d: Pull complete 
12efd486dee3: Pull complete 
d2dfc5062b56: Pull complete 
Digest: sha256:097e2b7f33f353a8<span class="hljs-built_in">fc</span>19bbf2a6558431c63637113fdc625e6d34<span class="hljs-built_in">fc</span>46f96c0130
Status: Downloaded newer image <span class="hljs-keyword">for</span> kibana:7.6.2
docker.io/library/kibana:7.6.2
</code></pre>
<h4 id="&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;kibana&#x670D;&#x52A1;">&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;Kibana&#x670D;&#x52A1;</h4>
<pre><code class="lang-bash">docker run --name kibana -p 5601:5601 \
--link elasticsearch:es \
<span class="hljs-_">-e</span> <span class="hljs-string">&quot;elasticsearch.hosts=http://es:9200&quot;</span> \
<span class="hljs-_">-d</span> kibana:7.6.2
</code></pre>
<h4 id="&#x8BBF;&#x95EE;&#x5730;&#x5740;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;--http39103203415601">&#x8BBF;&#x95EE;&#x5730;&#x5740;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;  <a href="http://39.103.203.41:5601/" target="_blank">http://39.103.203.41:5601/</a></h4>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8e6ac9822464ac6be7f27a6a9a5fe4a~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x4E3B;&#x9875;&#x9762;&#x542F;&#x52A8;"></p>
<h3 id="springboot&#x5E94;&#x7528;&#x96C6;&#x6210;logstash">SpringBoot&#x5E94;&#x7528;&#x96C6;&#x6210;Logstash</h3>
<pre><code class="lang-xml"><span class="hljs-comment">&lt;!--&#x96C6;&#x6210;logstash--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>net.logstash.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logstash-logback-encoder<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 id="&#x6DFB;&#x52A0;&#x914D;&#x7F6E;&#x6587;&#x4EF6;logback-springxml&#x8BA9;logback&#x7684;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x5230;logstash">&#x6DFB;&#x52A0;&#x914D;&#x7F6E;&#x6587;&#x4EF6;logback-spring.xml&#x8BA9;logback&#x7684;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x5230;logstash</h4>
<blockquote>
<p>&#x6CE8;&#x610F;appender&#x8282;&#x70B9;&#x4E0B;&#x7684;destination&#x9700;&#x8981;&#x6539;&#x6210;&#x4F60;&#x81EA;&#x5DF1;&#x7684;logstash&#x670D;&#x52A1;&#x5730;&#x5740;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x81EA;&#x5DF1;&#x7684;&#x662F;&#xFF1A;39.103.203.41:4560</p>
</blockquote>
<pre><code class="lang-xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-meta">&lt;!DOCTYPE configuration&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;org/springframework/boot/logging/logback/defaults.xml&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;org/springframework/boot/logging/logback/console-appender.xml&quot;</span>/&gt;</span>
    <span class="hljs-comment">&lt;!--&#x5E94;&#x7528;&#x540D;&#x79F0;--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;APP_NAME&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mall-admin&quot;</span>/&gt;</span>
    <span class="hljs-comment">&lt;!--&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;LOG_FILE_PATH&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;${LOG_FILE:-${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/logs}&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">contextName</span>&gt;</span>${APP_NAME}<span class="hljs-tag">&lt;/<span class="hljs-name">contextName</span>&gt;</span>

    <span class="hljs-comment">&lt;!--&#x6BCF;&#x5929;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x5230;&#x6587;&#x4EF6;appender--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;FILE&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">fileNamePattern</span>&gt;</span>${LOG_FILE_PATH}/${APP_NAME}-%d{yyyy-MM-dd}.log<span class="hljs-tag">&lt;/<span class="hljs-name">fileNamePattern</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">maxHistory</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">maxHistory</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>${FILE_LOG_PATTERN}<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>

    <span class="hljs-comment">&lt;!--&#x8F93;&#x51FA;&#x5230;logstash&#x7684;appender--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;LOGSTASH&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;net.logstash.logback.appender.LogstashTcpSocketAppender&quot;</span>&gt;</span>
        <span class="hljs-comment">&lt;!--&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7684;logstash&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x7AEF;&#x53E3;--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">destination</span>&gt;</span>39.103.203.41:4560<span class="hljs-tag">&lt;/<span class="hljs-name">destination</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;net.logstash.logback.encoder.LogstashEncoder&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;INFO&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;CONSOLE&quot;</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;FILE&quot;</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;LOGSTASH&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h4 id="&#x8FD0;&#x884C;springboot&#x5E94;&#x7528;">&#x8FD0;&#x884C;SpringBoot&#x5E94;&#x7528;</h4>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.macro.mall.tiny;

<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MallApplication</span> </span>{

 <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
  SpringApplication.run(MallApplication.class, args);
 }

}
</code></pre>
<h3 id="&#x5728;kibana&#x4E2D;&#x67E5;&#x770B;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;">&#x5728;kibana&#x4E2D;&#x67E5;&#x770B;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;</h3>
<h4 id="&#x521B;&#x5EFA;index-pattern">&#x521B;&#x5EFA;index pattern</h4>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eff6d2f459a7474082ba905c4a05ea28~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x9875;&#x9762;1"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1cdd4a8123ab4e17b80ee79f6ccfc116~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x9875;&#x9762;2"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c32db4b585d431daa11896882b2e8ba~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x9875;&#x9762;3"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e119ec9d067c42e684fa3440339a4340~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x9875;&#x9762;4"></p>
<h4 id="&#x8C03;&#x7528;&#x8BE5;&#x63A5;&#x53E3;&#x5E76;&#x67E5;&#x770B;&#x65E5;&#x5FD7;">&#x8C03;&#x7528;&#x8BE5;&#x63A5;&#x53E3;&#x5E76;&#x67E5;&#x770B;&#x65E5;&#x5FD7;</h4>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45bf83f457994b30abcd8a61d04a3a09~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x83B7;&#x53D6;&#x7528;&#x6237;&#x6743;&#x9650;"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22565a517eaf44a797aa7130a4e2d955~tplv-k3u1fbpfcp-zoom-1.image" alt="&#x67E5;&#x8BE2;&#x63A5;&#x53E3;&#x8C03;&#x7528;&#x4FE1;&#x606F;"></p>
 
          </section>
          
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>
 
        </div>
      </div>
      
    </div>

     
    <a
      href="section11.html"
      class="
        navigation navigation-prev
        
      "
      aria-label="Previous page: 1.11 分布式日志链路跟踪"
    >
      <i class="fa fa-angle-left"></i>
    </a>
     
    <a
      href="section13.html"
      class="
        navigation navigation-next
        
      "
      aria-label="Next page: 1.13 Docker学习常用命令汇总"
    >
      <i class="fa fa-angle-right"></i>
    </a>
      
  </div>
  <script>
    function showModal() {
      document.getElementsByClassName("mask")[0].style.display = "block";
      document.getElementsByClassName("donate-modal")[0].style.display =
        "block";
    }
    // 切换赞赏码
    function showDonateImg(num) {
      let alipay = "";
      let wxpay = ""
      if(num){
        wxpay = "hidden"
      }else{
        alipay = "hidden"
      }
      document.getElementById("wxpay-code").hidden = wxpay;
      document.getElementById("alipay-code").hidden = alipay;
      document.getElementsByName("pay-way")[num].checked = "checked";
    }

    // 关闭赞赏框
    function closeDonateModal() {
      document.getElementsByClassName("mask")[0].style.display = "none";
      document.getElementsByClassName("donate-modal")[0].style.display = "none";
    }

    var gitbook = gitbook || [];
    gitbook.push(function () {
      gitbook.page.hasChanged({"page":{"title":"1.12 ELK搭建日志收集系统","level":"1.4.12","depth":2,"next":{"title":"1.13 Docker学习常用命令汇总","level":"1.4.13","depth":2,"path":"chapter1/section13.md","ref":"chapter1/section13.md","articles":[]},"previous":{"title":"1.11 分布式日志链路跟踪","level":"1.4.11","depth":2,"path":"chapter1/section11.md","ref":"chapter1/section11.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-sharing","-search","-favicon","code","expandable-chapters","theme-lou","back-to-top-button","search-pro","flexible-alerts"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"search-pro":{},"code":{"copyButtons":true},"theme-lou":{"hide-elements":[".summary .gitbook-link"],"color":"#2096FF","copyright":{"author":"松露老师"},"forbidCopy":true,"logo":"assets/logo.png","titleColor":{"h1":"#8b008b","h2":"#20b2aa","h3":"#a52a2a"},"search-placeholder":"众里寻他千百度","copyrightLogo":"assets/copyright.png","favicon":"assets/favicon.ico","autoNumber":3},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"flexible-alerts":{"style":"callout","note":{"label":"Note","icon":"fa fa-info-circle","className":"info"},"tip":{"label":"Tip","icon":"fa fa-lightbulb-o","className":"tip"},"warning":{"label":"Warning","icon":"fa fa-exclamation-triangle","className":"warning"},"danger":{"label":"Attention","icon":"fa fa-ban","className":"danger"}},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"方洋","lang":"zh-cn","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"技术文档沉淀","gitbook":"*","description":"博客技术文档总结"},"file":{"path":"chapter1/section12.md","mtime":"2022-04-19T12:16:16.216Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-04-20T02:39:42.116Z"},"basePath":"..","book":{"language":""}});
    });
  </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-lou/lou.js"></script>
        
    

    </body>
</html>

